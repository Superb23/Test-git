<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .active {
            color: red;
            background-color: chartreuse;
            font-size: 30px;
        }
    </style>
</head>
<body>
    
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
    </ul>


    <script>

        /*
            事件委托（event delegation）
            当子元素被点击时，父元素可以通过冒泡监听到子元素的点击；并且可以通过event.target获取到当前监听的元素；
        */


        // 1.每一个li都监听自己的点击，并且有自己的处理函数
        var liEls = document.querySelectorAll("li")

        // for (let liEl of liEls) {
        //     // 监听点击
        //     liEl.onclick = function() {
        //         liEl.classList.add("active")
        //     }
        // }
        // for (var liEl of liEls) {
        //     // 监听点击
        //     // liEl.onclick = function() {
        //     //     this.classList.add("active")
        //     // }
        //     liEl.onclick = function(event) {
        //         event.currentTarget.classList.add("active")
        //     }
        // }

        // 2.统一在ul中监听                                         事件委托---     点击该元素，在其父类进行处理
        // var ulEl = document.querySelector("ul")

        // ulEl.onclick = function(event) {
        //     event.target.classList.add("active") 
        // }

        // 3.新需求：点击li变成active，其他的取消active
        var ulEl = document.querySelector("ul")
        var activeLiEl = null   // 变量记录最新的active对应的li

        ulEl.onclick = function(event) {

            // for (var i = 0; i < ulEl.children.length; i++) {
            //     var liEl = ulEl.children[i]
            //     if (liEl.classList.contains("active")) {
            //         activeLiEl.classList.remove("active")
            //     }
            // }

            // 1.变量记录的方式
            if (activeLiEl && event.target !== ulEl) {
                activeLiEl.classList.remove("active")
            }
            // 2.给点击的元素添加active
            if (event.target !== ulEl) {
                event.target.classList.add("active") 
            }
            // 3.记录最新的active对应的li
            activeLiEl = event.target
        }
        
    </script>
</body>
</html>